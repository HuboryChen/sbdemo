<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>useList</title>
    <link rel="stylesheet" th:href="@{/plugins/bootstrap-3.3.7/dist/css/bootstrap.css}"/>
    <script th:src="@{/plugins/jquery.min.js}"></script>
    <script th:src="@{/plugins/bootstrap-3.3.7/dist/js/bootstrap.min.js}"></script>
    <script src="http://apps.bdimg.com/libs/layer/2.1/layer.js"></script>
</head>
<body class="container">
    <h1>用户列表</h1>
    <br/><br/>
    <!-- 添加用户 -->
    <div class="form-group">
        <div class="col-sm-2 control-label">
            <a href="#"  class="btn btn-info" th:onclick="'javascript:addUser();'">add</a>
            &nbsp;&nbsp;
            <a href="/userAdd.html">add</a>
        </div>
    </div>

    <div class="with:80%">
        <!-- 用户列表 -->
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>#</th>
                    <th>User Name</th>
                    <th>Password</th>
                    <th>Age</th>
                    <th>status</th>
                    <th>Edit</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="user,userStat:${userPage.content}">
                    <td th:scope="row" th:text="${userStat.index+1}">1</td>
                    <td th:text="${user.username}">张三</td>
                    <td th:text="${user.password}">666666</td>
                    <td th:text="${user.type}">管理员</td>
                    <td th:text="${user.status == 0 ? '停用' : '启用'}">是/否启用</td>
                    <td><a  class=" btn default" href="#example"  data-toggle="modal">edit</a></td>
                    <td><a th:href="@{/delete(id=${user.id})}">delete</a></td>
                </tr>
            </tbody>
        </table>

        <!-- 分页 -->
        <ul class="pagination" style="text-align:center">
            <!-- 第一页-->
            <li>
                <a href="?page=1"  class="">第一页</a>
            </li>

            <!--上一页-->
            <li th:if="${userPage.number > 0 }">
                <a th:href="@{?(page=${userPage.number})}">上一页</a>
            </li>

            <!--迭代生成页数-->
            <li th:each="i:${#numbers.sequence(1,userPage.totalPages)}" th:classappend="${(userPage.number + 1) eq i} ? 'active' : ''">
                <a th:href="@{?(page=${i})}" th:text="${i}" class="">1</a>
            </li>

            <!--下一页-->
            <li th:unless="${userPage.number + 1 == userPage.totalPages}">
                <a th:href="@{?(page=${userPage.number} + 2)}">下一页</a>
            </li>

            <!--最末页-->
            <li>
                <a th:href="@{?(page = ${userPage.totalPages})}">最末页</a>
            </li>
        </ul>

    </div>

    <div id="example"></div>

    <script>
        /*使用直接调用静态页面的形式调用html*/
        function addUser()
        {
            var user_form = undefined;
            layer.open({
                type: 2
                ,skin: 'layui-layer-rim'
                ,title:'添加用户'
                ,area:['800px','300px']
                ,offset: 'auto' //具体配置参考：offset参数项
                ,content: 'userAdd.html'
                ,shade: 0.4 //不显示遮罩
                ,btn: '提交'
                ,btnAlign: 'c' //按钮居中
                ,success: function(layero, index){
                    user_form = layer.getChildFrame('#user_form',index);
                }
                ,yes: function () {
                    alert("sjdhjshdjshdjshdj");
                    user_form.submit();
                    layer.closeAll();
                }
            });
        }

       /* 使用转发的形式调用html*/
       /*
        function addUser()
        {
            $.ajax({
                url:'/toAdd',
                contentType:'application/html;charset=utf-8',
                type:'get',
                dataType:'html',
                success: function (data) {
                    layer.open({
                        type: 1
                        ,title:'添加用户'
                        ,area:['500px','300px']
                        ,offset: 'auto' //具体配置参考：offset参数项
                        ,content: $("#example").html(data)
                        // ,btn: '关闭全部'
                        ,btnAlign: 'c' //按钮居中
                        ,shade: 0.4 //不显示遮罩
                        ,yes: function(){
                            layer.closeAll();
                        }
                    });


                }
            })

        }*/

    </script>

</body>
</html>